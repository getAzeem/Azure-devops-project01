trigger:
- main

pool:
  name: Default  # Use your self-hosted agent pool name

steps:
- checkout: self

- script: |
    python --version
    pip install setuptools wheel twine
    python setup.py sdist bdist_wheel
  displayName: 'Build Python Package'

- script: |
    twine upload --repository-url https://pkgs.dev.azure.com/E23CSEU1316/DevOps-Demo-WebApp/_packaging/python-demo-feed/pypi/upload/ dist/*
  env:
    TWINE_USERNAME: E23CSEU1316@bennett.edu.in
    TWINE_PASSWORD: $(TWINE_PAT)
  displayName: 'Upload to Azure Artifacts'
